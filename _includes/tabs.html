<div class="tabs">
  {% assign tab_names = include.names | split: "|" %}
  
  <div class="tab-buttons">
    {% for name in tab_names %}
      <button class="tab-button" onclick="openTab(event, '{{ name | slugify }}')" {% if forloop.first %}id="defaultOpen"{% endif %}>{{ name }}</button>
    {% endfor %}
  </div>
  
  <div id="typescript" class="tab-content">
    {{ include.typescript | markdownify }}
  </div>
  
  <div id="python" class="tab-content">
    {{ include.python | markdownify }}
  </div>
</div>

<script>
function openTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tab-content");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tab-button");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
  
  // Save user preference to localStorage
  localStorage.setItem('preferredLanguage', tabName);
}

document.addEventListener("DOMContentLoaded", function() {
  // Check if user has a saved preference
  var preferredLanguage = localStorage.getItem('preferredLanguage');
  
  // If preference exists and the tab exists, open it
  if (preferredLanguage && document.getElementById(preferredLanguage)) {
    // Find the button for this tab
    var buttons = document.getElementsByClassName("tab-button");
    for (var i = 0; i < buttons.length; i++) {
      if (buttons[i].getAttribute("onclick").includes(preferredLanguage)) {
        buttons[i].click();
        return;
      }
    }
  }
  
  // Otherwise open the default tab
  document.getElementById("defaultOpen").click();
});
</script>